(function(e){function t(t){for(var o,r,c=t[0],i=t[1],s=t[2],d=0,l=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);f&&f(t);while(l.length)l.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(u.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a={app:0},u=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-1a66e7dc":"ed22983f","chunk-2d230c65":"34fdb2b2","chunk-7d27d486":"9f7728e9"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-1a66e7dc":1,"chunk-7d27d486":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-1a66e7dc":"6465bb21","chunk-2d230c65":"31d6cfe0","chunk-7d27d486":"2a9f8500"}[e]+".css",a=i.p+o,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var s=u[c],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===o||d===a))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){s=l[c],d=s.getAttribute("data-href");if(d===o||d===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var o=t&&t.target&&t.target.src||a,u=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=o,delete r[e],f.parentNode.removeChild(f),n(u)},f.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){r[e]=0})));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var u=new Promise((function(t,n){o=a[e]=[t,n]}));t.push(o[2]=u);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=c(e);var l=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}a[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://ozkanozdemir.github.io/vue-auth-sample/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var f=d;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"024a":function(e,t,n){"use strict";n("9ba0")},"50f0":function(e,t,n){"use strict";n("e456")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),r={class:"main"};function a(e,t,n,a,u,c){var i=Object(o["C"])("Header"),s=Object(o["C"])("router-view"),d=Object(o["C"])("Footer");return Object(o["v"])(),Object(o["f"])(o["a"],null,[Object(o["i"])(i),Object(o["g"])("main",r,[Object(o["i"])(s)]),Object(o["i"])(d)],64)}var u=function(e){return Object(o["y"])("data-v-4bfbddae"),e=e(),Object(o["w"])(),e},c={class:"header"},i={class:"navMenu"},s=Object(o["h"])(" Home "),d=Object(o["h"])(" Login "),l=u((function(){return Object(o["g"])("div",{class:"dot"},null,-1)}));function f(e,t,n,r,a,u){var f=Object(o["C"])("router-link");return Object(o["v"])(),Object(o["f"])("header",c,[Object(o["g"])("nav",i,[e.isAuthenticated?(Object(o["v"])(),Object(o["d"])(f,{key:0,to:{name:"home"}},{default:Object(o["L"])((function(){return[s]})),_:1})):Object(o["e"])("",!0),e.isAuthenticated?Object(o["e"])("",!0):(Object(o["v"])(),Object(o["d"])(f,{key:1,to:{name:"login"}},{default:Object(o["L"])((function(){return[d]})),_:1})),e.isAuthenticated?(Object(o["v"])(),Object(o["f"])("a",{key:2,href:"#",onClick:t[0]||(t[0]=function(){return e.logout&&e.logout.apply(e,arguments)})},"Logout")):Object(o["e"])("",!0),l])])}var h=n("5530"),m=n("5502"),p={name:"Header",computed:Object(h["a"])({},Object(m["c"])(["isAuthenticated"])),methods:Object(h["a"])({},Object(m["b"])(["logout"]))},b=(n("c15e"),n("6b0d")),g=n.n(b);const v=g()(p,[["render",f],["__scopeId","data-v-4bfbddae"]]);var k=v,O=function(e){return Object(o["y"])("data-v-65cbb1be"),e=e(),Object(o["w"])(),e},j={class:"footer"},y=O((function(){return Object(o["g"])("a",{href:"https://github.com/ozkanozdemir/vue-auth-sample",target:"_blank"}," Vue Auth Sample ",-1)})),A=Object(o["h"])(" from "),w=O((function(){return Object(o["g"])("a",{href:"https://github.com/ozkanozdemir",target:"_blank"},"@ozkanozdemir",-1)})),S=[y,A,w];function x(e,t,n,r,a,u){return Object(o["v"])(),Object(o["f"])("footer",j,S)}var E={name:"Footer"};n("50f0");const I=g()(E,[["render",x],["__scopeId","data-v-65cbb1be"]]);var L=I,_={name:"App",components:{Header:k,Footer:L}};n("024a");const D=g()(_,[["render",a]]);var C=D,P=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),T=n("1da1"),R=(n("96cf"),n("e9c4"),function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},localStorage.setItem("a",JSON.stringify(t)),localStorage.removeItem("a"),e.abrupt("return",new Promise((function(e){setTimeout((function(){e({status:"success",code:200,data:{userId:1,token:"perfectToken",tokenExpiration:604800}})}),1e3)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),z={state:function(){return{didAutoLogout:localStorage.getItem("didAutoLogout"),isAuthenticated:localStorage.getItem("isAuthenticated"),token:localStorage.getItem("token"),tokenExpirationDate:localStorage.getItem("tokenExpirationDate"),user:localStorage.getItem("user")}},getters:{isAuthenticated:function(e){return e.isAuthenticated},token:function(e){return e.token},tokenExpirationDate:function(e){return e.tokenExpirationDate},user:function(e){return e.user}},mutations:{logout:function(e){e.isAuthenticated=!1,e.token="",e.tokenExpirationDate=null,e.user=null,localStorage.removeItem("isAuthenticated"),localStorage.removeItem("token"),localStorage.removeItem("tokenExpirationDate"),localStorage.removeItem("user"),U.push({name:"login"})},setAutoLogout:function(e,t){e.didAutoLogout=!!t},setUser:function(e,t){e.isAuthenticated="1",e.token=t.token,e.tokenExpirationDate=t.tokenExpirationDate,e.user={id:t.userId},localStorage.setItem("isAuthenticated","1"),localStorage.setItem("token",e.token),localStorage.setItem("tokenExpirationDate",e.tokenExpirationDate),localStorage.setItem("user",JSON.stringify(e.user))}},actions:{setUser:function(e,t){e.commit("setUser",t)},login:function(e,t){return Object(T["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,R(t);case 2:if(o=n.sent,"success"!==o.status){n.next=6;break}return e.commit("setUser",{token:o.data.token,tokenExpirationDate:Date.now()+1e3*o.data.tokenExpiration,userId:o.data.userId}),n.abrupt("return",!0);case 6:return n.abrupt("return",!1);case 7:case"end":return n.stop()}}),n)})))()},logout:function(e){e.commit("logout")},autoLogout:function(e){e.dispatch("logout"),e.commit("setAutoLogout",!0)}}},N=z,q=Object(m["a"])({modules:{auth:N}}),M=q,F=[{path:"/",name:"home",component:function(){return n.e("chunk-1a66e7dc").then(n.bind(null,"bc13"))},meta:{authRequired:!0}},{path:"/login",name:"login",component:function(){return n.e("chunk-7d27d486").then(n.bind(null,"013f"))},meta:{noAuthRequired:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:function(){return n.e("chunk-2d230c65").then(n.bind(null,"ee5d"))},meta:{authRequired:!1}}],H=Object(P["a"])({history:Object(P["b"])(),routes:F,linkActiveClass:"active"});H.beforeEach((function(e,t,n){var o,r,a=M.getters.isAuthenticated,u=M.getters.tokenExpirationDate;if(null!==(o=e.meta)&&void 0!==o&&o.authRequired&&!a&&n({name:"login"}),null!==(r=e.meta)&&void 0!==r&&r.noAuthRequired&&a&&n({name:"home"}),a){var c=+u-Date.now();c>0?setTimeout((function(){M.dispatch("autoLogout")}),c):M.dispatch("autoLogout")}n()}));var U=H,J=Object(o["c"])(C);J.use(U),J.use(M),J.mount("#app")},8740:function(e,t,n){},"9ba0":function(e,t,n){},c15e:function(e,t,n){"use strict";n("8740")},e456:function(e,t,n){}});
//# sourceMappingURL=app.881c8cca.js.map